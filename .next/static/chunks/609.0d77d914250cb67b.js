(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[609],{3609:function(e,t,r){"use strict";r.r(t);var o=r(5893),i=r(7294),n=r(2778),u=r(1163),l=r(1433),s=r.n(l);t.default=()=>{let[e,t]=(0,i.useState)(""),[r,l]=(0,i.useState)(!0),[a,c]=(0,i.useState)(0),[d,h]=(0,i.useState)(null),w=(0,u.useRouter)(),m=async()=>{l(!0);try{let{data:e,error:r}=await n.O.from("lyrics").select("title, artist, music_url, slug").not("music_url","is",null).eq("status","approved");if(r)throw Error("Error fetching videos");if(e&&e.length>0){let r=new Date().getUTCMinutes(),o=Math.floor(r/5)%e.length,i=e[o];t(i.music_url),h(i)}else throw Error("No videos found");l(!1)}catch(e){console.error(e),t("https://www.youtube.com/watch?v=dQw4w9WgXcQ"),l(!1)}};(0,i.useEffect)(()=>{m();let e=setInterval(()=>{m()},3e5);return()=>clearInterval(e)},[]);let f=()=>300-(new Date().getUTCMinutes()%5*60+new Date().getUTCSeconds());(0,i.useEffect)(()=>{let e=setInterval(()=>{c(f())},1e3);return()=>clearInterval(e)},[]);let y=e=>{let t=e.match(/(?:https?:\/\/)?(?:www\.)?(?:youtube\.com\/(?:[^\/\n\s]+\/\S+\/|(?:v|e(?:mbed)?)\/|\S*?[?&]v=)|youtu\.be\/)([a-zA-Z0-9_-]{11})/);return t?t[1]:null};return(0,o.jsxs)("div",{className:s().homeYTVideoContainer,children:[(0,o.jsxs)("h2",{children:["New Song in ",Math.floor(a/60),":",(a%60).toString().padStart(2,"0")," Minutes. Stay Tuned!"]})," ",r?(0,o.jsx)("p",{children:"Loading YouTube video..."}):(0,o.jsxs)(o.Fragment,{children:[(()=>{if(!e)return null;let t=y(e);if(!t)return null;let r=`https://www.youtube.com/embed/${t}?modestbranding=1&rel=0&controls=1&showinfo=0&autoplay=1&mute=0`;return(0,o.jsx)("div",{className:s().youtubeVideoSection,children:(0,o.jsx)("iframe",{width:"100%",height:"600",src:r,title:"YouTube video player",frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})})})(),(0,o.jsx)("button",{className:s().viewLyricsButton,onClick:()=>{if(d){let{slug:e}=d;w.push(`/lyrics/${e}`)}},children:"View Lyrics"})]})]})}},1433:function(e){e.exports={homeYTVideoContainer:"HomeYTVideo_homeYTVideoContainer__3ZaX1",youtubeVideoSection:"HomeYTVideo_youtubeVideoSection__hMo6_",viewLyricsButton:"HomeYTVideo_viewLyricsButton__7z95j"}}}]);