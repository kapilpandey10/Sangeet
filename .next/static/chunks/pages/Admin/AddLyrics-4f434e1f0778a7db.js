(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[401],{4367:function(e,s,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/Admin/AddLyrics",function(){return t(2276)}])},2276:function(e,s,t){"use strict";t.r(s);var i=t(5893),r=t(7294),a=t(1372),l=t(7375),n=t(3205),d=t.n(n);let u=(0,a.eI)("https://tffwhfvevgjscrhkdmpl.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InRmZndoZnZldmdqc2NyaGtkbXBsIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MjUzMzg4NjcsImV4cCI6MjA0MDkxNDg2N30.VqEkYRZU-s-9QiLp35pHR04wSw3sLVfoswggMCabkeI");s.default=()=>{let[e,s]=(0,r.useState)(""),[t,a]=(0,r.useState)(""),[n,o]=(0,r.useState)([{name:"",suggestions:[]}]),[c,m]=(0,r.useState)(""),[h,g]=(0,r.useState)(""),[p,y]=(0,r.useState)(""),[x,j]=(0,r.useState)(""),[v,_]=(0,r.useState)(""),[b,L]=(0,r.useState)(""),[f,w]=(0,r.useState)(""),[A,N]=(0,r.useState)(""),[C,S]=(0,r.useState)(""),[I,F]=(0,r.useState)("");(0,r.useEffect)(()=>{document.title="Add Song Lyrics | Contribute to dynabyte "},[]);let B=e=>e.trim().toLowerCase().replace(/[^a-zA-Z0-9\s]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-"),G=e=>{let s=/(?:https?:\/\/)?(?:www\.)?(?:youtube\.com\/(?:[^\/\n\s]+\/\S+\/|(?:v|e(?:mbed)?)\/|\S*?[?&]v=)|youtu\.be\/)([a-zA-Z0-9_-]{11})/,t=null;if(s.test(e)){let i=e.match(s);t=i?i[1]:null}else{if(!/^[a-zA-Z0-9_-]{11}$/.test(e))return L("Please enter a valid YouTube Video URL."),null;t=e}return L(""),t},k=e=>{let s=[...n];s.splice(e,1),o(s)},q=async(e,s)=>{let t=[...n],i=s.target.value;if(t[e].name=i,o(t),i.length>1){let{data:s,error:r}=await u.from("lyrics").select("artist").ilike("artist",`%${i}%`).limit(5);if(!r&&s.length){let i=[...new Set(s.map(e=>e.artist))];t[e].suggestions=i}else t[e].suggestions=[];o(t)}else t[e].suggestions=[],o(t)},T=(e,s)=>{let t=[...n];t[e].name=s,t[e].suggestions=[],o(t)},E=async i=>{i.preventDefault();let r=G(v);if(!r)return;let l=t||B(e);try{let{data:t,error:i}=await u.from("lyrics").insert([{title:e,slug:l,artist:n.map(e=>e.name).join(", "),lyrics_writer:c,lyrics:h,english_lyrics:p,published_date:`${x}-01-01`,music_url:`https://www.youtube.com/watch?v=${r}`,status:"pending",added_by:A||"Admin",language:C,description:I}]);if(i)throw i;w("Lyrics submitted successfully! It will be reviewed by the admin and listed soon."),s(""),a(""),o([{name:"",suggestions:[]}]),m(""),g(""),y(""),j(""),_(""),N(""),S(""),F(""),setTimeout(()=>w(""),5e3)}catch(e){w("An error occurred while adding lyrics: "+e.message),setTimeout(()=>w(""),5e3)}};return(0,i.jsxs)("div",{className:d().addLyricsContainer,children:[(0,i.jsx)("h1",{className:d().addLyricsTitle,children:"Add New Lyrics"}),f&&(0,i.jsx)("p",{className:d().submissionMessage,children:f}),(0,i.jsxs)("form",{onSubmit:E,className:d().addLyricsForm,children:[(0,i.jsxs)("div",{className:d().formGroup,children:[(0,i.jsx)("label",{htmlFor:"title",children:"Title"}),(0,i.jsx)("input",{type:"text",id:"title",value:e,onChange:e=>s(e.target.value),required:!0})]}),(0,i.jsxs)("div",{className:d().formGroup,children:[(0,i.jsx)("label",{htmlFor:"slug",children:"Slug (URL-friendly)"}),(0,i.jsx)("input",{type:"text",id:"slug",value:t,onChange:e=>a(e.target.value),placeholder:"Leave empty to auto-generate"})]}),(0,i.jsxs)("div",{className:d().formGroup,children:[(0,i.jsx)("label",{htmlFor:"artists",children:"Singer"}),n.map((e,s)=>(0,i.jsxs)("div",{className:d().artistInput,children:[(0,i.jsx)("input",{type:"text",value:e.name,onChange:e=>q(s,e),required:!0,placeholder:"Enter Singer name"}),s>0&&(0,i.jsx)("button",{type:"button",onClick:()=>k(s),className:d().removeArtistButton,children:(0,i.jsx)(l.Xm5,{})}),e.suggestions.length>0&&(0,i.jsx)("ul",{className:d().suggestionsList,children:e.suggestions.map((e,t)=>(0,i.jsx)("li",{onClick:()=>T(s,e),children:e},t))})]},s)),(0,i.jsxs)("button",{type:"button",onClick:()=>{o([...n,{name:"",suggestions:[]}])},className:d().addArtistButton,children:[(0,i.jsx)(l.wEH,{})," Add Artist"]})]}),(0,i.jsxs)("div",{className:d().formGroup,children:[(0,i.jsx)("label",{htmlFor:"writer",children:"Lyrics Writer"}),(0,i.jsx)("input",{type:"text",id:"writer",value:c,onChange:e=>m(e.target.value),required:!0})]}),(0,i.jsxs)("div",{className:d().formGroup,children:[(0,i.jsx)("label",{htmlFor:"lyrics",children:"Lyrics (Original Language)"}),(0,i.jsx)("textarea",{id:"lyrics",value:h,onChange:e=>g(e.target.value),rows:10,required:!0})]}),(0,i.jsxs)("div",{className:d().formGroup,children:[(0,i.jsx)("label",{htmlFor:"englishLyrics",children:"Lyrics (English)"}),(0,i.jsx)("textarea",{id:"englishLyrics",value:p,onChange:e=>y(e.target.value),rows:10,required:!0})]}),(0,i.jsxs)("div",{className:d().formGroup,children:[(0,i.jsx)("label",{htmlFor:"description",children:"Short Description"}),(0,i.jsx)("textarea",{id:"description",value:I,onChange:e=>F(e.target.value),rows:3,required:!0})]}),(0,i.jsxs)("div",{className:d().formGroup,children:[(0,i.jsx)("label",{htmlFor:"releaseYear",children:"Release Year"}),(0,i.jsx)("input",{type:"number",id:"releaseYear",value:x,onChange:e=>j(e.target.value),required:!0,min:"1900",max:new Date().getFullYear()})]}),(0,i.jsxs)("div",{className:d().formGroup,children:[(0,i.jsx)("label",{htmlFor:"videoUrl",children:"YouTube Video URL/ID"}),(0,i.jsx)("input",{type:"text",id:"videoUrl",value:v,onChange:e=>_(e.target.value),placeholder:"YouTube Video URL or ID",required:!0}),b&&(0,i.jsx)("p",{className:d().error,children:b})]}),(0,i.jsxs)("div",{className:d().formGroup,children:[(0,i.jsx)("label",{htmlFor:"addedBy",children:"Added By"}),(0,i.jsx)("input",{list:"addedByOptions",id:"addedBy",value:A,onChange:e=>N(e.target.value),placeholder:"Admin, Ashish Khanal (Mr. Thule)",required:!0}),(0,i.jsxs)("datalist",{id:"addedByOptions",children:[(0,i.jsx)("option",{value:"",disabled:!0,children:"Select who added the lyrics"}),(0,i.jsx)("option",{value:"Admin"}),(0,i.jsx)("option",{value:"Ashish Khanal (Mr. Thule)"})]})]}),(0,i.jsxs)("div",{className:d().formGroup,children:[(0,i.jsx)("label",{htmlFor:"language",children:"Language"}),(0,i.jsx)("input",{type:"text",id:"language",value:C,onChange:e=>S(e.target.value),required:!0})]}),(0,i.jsx)("button",{type:"submit",className:d().submitButton,children:"Submit Lyrics"})]})]})}},3205:function(e){e.exports={addLyricsContainer:"AddLyrics_addLyricsContainer__ZEahU",addLyricsTitle:"AddLyrics_addLyricsTitle__Q9FJZ",submissionMessage:"AddLyrics_submissionMessage__zhPRn",addLyricsForm:"AddLyrics_addLyricsForm__tGR8D",formGroup:"AddLyrics_formGroup__qq4sM",artistInput:"AddLyrics_artistInput__7d7Nd",removeArtistButton:"AddLyrics_removeArtistButton__v58LD",suggestionsList:"AddLyrics_suggestionsList__45Cla",addArtistButton:"AddLyrics_addArtistButton__jvVRF",error:"AddLyrics_error__VI0Hi",submitButton:"AddLyrics_submitButton__kT598"}}},function(e){e.O(0,[372,888,774,179],function(){return e(e.s=4367)}),_N_E=e.O()}]);