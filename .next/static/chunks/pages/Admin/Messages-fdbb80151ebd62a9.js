(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[409],{1295:function(e,s,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/Admin/Messages",function(){return a(2038)}])},5479:function(e,s,a){"use strict";var n=a(5893);a(7294);var i=a(514),t=a.n(i);s.Z=e=>{let{show:s,onConfirm:a,onCancel:i,message:o,confirmButtonText:l,cancelButtonText:c}=e;return s?(0,n.jsxs)("div",{className:t().confirmModalOverlay,children:[" ",(0,n.jsxs)("div",{className:t().confirmModal,children:[" ",(0,n.jsxs)("div",{className:t().confirmModalContent,children:[(0,n.jsx)("h2",{children:"Confirmation"}),(0,n.jsx)("p",{children:o}),(0,n.jsxs)("div",{className:t().confirmModalActions,children:[(0,n.jsx)("button",{className:`${t().confirmModalButton} ${t().confirm}`,onClick:a,children:l||"Yes, Confirm"}),(0,n.jsx)("button",{className:`${t().confirmModalButton} ${t().cancel}`,onClick:i,children:c||"Cancel"})]})]})]})]}):null}},2038:function(e,s,a){"use strict";a.r(s);var n=a(5893),i=a(7294),t=a(1372),o=a(5479),l=a(3254),c=a.n(l);let r=(0,t.eI)("https://tffwhfvevgjscrhkdmpl.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InRmZndoZnZldmdqc2NyaGtkbXBsIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MjUzMzg4NjcsImV4cCI6MjA0MDkxNDg2N30.VqEkYRZU-s-9QiLp35pHR04wSw3sLVfoswggMCabkeI");s.default=()=>{let[e,s]=(0,i.useState)([]),[a,t]=(0,i.useState)(null),[l,m]=(0,i.useState)(!1),[d,g]=(0,i.useState)(null);(0,i.useEffect)(()=>{(async()=>{let{data:e,error:a}=await r.from("message").select("*").order("created_at",{ascending:!1});a?console.error("Error fetching messages:",a):s(e)})()},[]);let _=async e=>{if(t(e),!e.viewed){let{error:a}=await r.from("message").update({viewed:!0}).eq("id",e.id);a?console.error("Error updating message status:",a):s(s=>s.map(s=>s.id===e.id?{...s,viewed:!0}:s))}},f=async e=>{let{error:a}=await r.from("message").delete().eq("id",e);a?console.error("Error deleting message:",a):(s(s=>s.filter(s=>s.id!==e)),t(null)),m(!1)},u=e=>{g(e),m(!0)};return(0,n.jsxs)("div",{className:c().messagesContainer,children:[(0,n.jsx)("div",{className:c().messageList,children:(0,n.jsx)("ul",{children:e.map(e=>(0,n.jsxs)("li",{className:`${c().messageItem} ${e.viewed?"":c().newMessage}`,onClick:()=>_(e),children:[(0,n.jsxs)("div",{className:c().messageProfile,children:[(0,n.jsx)("p",{children:(0,n.jsx)("strong",{children:e.name})}),(0,n.jsx)("p",{children:e.email})]}),!e.viewed&&(0,n.jsx)("span",{className:c().newBadge,children:"New"}),(0,n.jsx)("button",{className:c().deleteButton,onClick:()=>u(e),children:"Delete"})]},e.id))})}),(0,n.jsx)("div",{className:c().messageContent,children:a?(0,n.jsxs)("div",{className:c().messageBubble,children:[(0,n.jsxs)("div",{className:c().messageHeader,children:[(0,n.jsxs)("h3",{children:["Message from ",a.name]}),(0,n.jsx)("span",{className:c().messageTimestamp,children:new Date(a.created_at).toLocaleString()})]}),(0,n.jsx)("p",{children:a.message})]}):(0,n.jsx)("p",{children:"Select a message to view its content"})}),(0,n.jsx)(o.Z,{show:l,onConfirm:()=>{d&&f(d.id)},onCancel:()=>{m(!1),g(null)},message:"Are you sure you want to delete this message?"})]})}},514:function(e){e.exports={confirmModal:"ConfirmMsg_confirmModal__0nBMx",confirmModalContent:"ConfirmMsg_confirmModalContent__7dzZy",confirmModalActions:"ConfirmMsg_confirmModalActions__2cYjB",confirmModalButton:"ConfirmMsg_confirmModalButton__5i4wa",confirm:"ConfirmMsg_confirm__GtECM",cancel:"ConfirmMsg_cancel__opN_2"}},3254:function(e){e.exports={messagesContainer:"Messages_messagesContainer__hkv5l",messageList:"Messages_messageList__tpIwS",messageContent:"Messages_messageContent__xhhBc",messageItem:"Messages_messageItem__1N9wL",newMessage:"Messages_newMessage__6eWpC",messageProfile:"Messages_messageProfile__V_HoL",newBadge:"Messages_newBadge__XxXUL",deleteButton:"Messages_deleteButton__h89r8",messageBubble:"Messages_messageBubble__OauNj",messageHeader:"Messages_messageHeader__dGjBX",messageTimestamp:"Messages_messageTimestamp__3kK_S"}}},function(e){e.O(0,[372,888,774,179],function(){return e(e.s=1295)}),_N_E=e.O()}]);