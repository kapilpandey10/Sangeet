(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[863],{2546:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/Admin/addArtist",function(){return s(2328)}])},2328:function(e,t,s){"use strict";s.r(t);var a=s(5893),r=s(7294),i=s(1372),l=s(2747),n=s.n(l);let d=(0,i.eI)("https://tffwhfvevgjscrhkdmpl.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InRmZndoZnZldmdqc2NyaGtkbXBsIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MjUzMzg4NjcsImV4cCI6MjA0MDkxNDg2N30.VqEkYRZU-s-9QiLp35pHR04wSw3sLVfoswggMCabkeI");t.default=()=>{let[e,t]=(0,r.useState)(""),[s,i]=(0,r.useState)(""),[l,c]=(0,r.useState)(""),[o,u]=(0,r.useState)(""),[m,p]=(0,r.useState)([]),[_,h]=(0,r.useState)(""),[f,g]=(0,r.useState)("");(0,r.useEffect)(()=>{(async()=>{try{let{data:e,error:t}=await d.from("lyrics").select("artist").neq("artist",null);if(t)throw t;let s=Array.from(new Set(e.map(e=>e.artist.split(",").map(e=>e.trim())).flat())),{data:a,error:r}=await d.from("artists").select("name").not("bio","is",null);if(r)throw r;let i=a.map(e=>e.name),l=s.filter(e=>!i.includes(e));p(l)}catch(e){console.error("Error fetching artists:",e.message),g("Failed to fetch artists.")}})()},[]),(0,r.useEffect)(()=>{(async()=>{if(e)try{let{data:t,error:s}=await d.from("lyrics").select("music_url").eq("artist",e).limit(1).single();s||!t?(console.error("Error fetching song for artist:",s),u("")):u(t.music_url||"")}catch(e){console.error("Error fetching music_url for artist:",e.message)}})()},[e]);let A=async a=>{if(a.preventDefault(),!e||!s||!l){g("All fields are required.");return}let r=/<\/?[a-z][\s\S]*>/i.test(l)?l:`<p>${l}</p>`;try{let{data:a,error:l}=await d.from("artists").upsert([{name:e,image_url:s,bio:r,video_url:o}]);if(l)throw l;h("Artist added/updated successfully!"),t(""),i(""),c(""),u("")}catch(e){console.error("Error adding/updating artist:",e.message),g("Failed to add/update artist. Please try again.")}};return(0,a.jsxs)("div",{className:n().addArtistContainer,children:[(0,a.jsx)("h2",{className:n().heading,children:"Add or Edit Artist"}),_&&(0,a.jsx)("p",{className:n().successMessage,children:_}),f&&(0,a.jsx)("p",{className:n().errorMessage,children:f}),(0,a.jsxs)("form",{onSubmit:A,className:n().form,children:[(0,a.jsxs)("label",{className:n().label,children:["Artist Name:",(0,a.jsx)("input",{type:"text",value:e,onChange:e=>t(e.target.value),placeholder:"Start typing artist name...",list:"artist-suggestions",className:n().input}),(0,a.jsx)("datalist",{id:"artist-suggestions",children:m.filter(t=>t.toLowerCase().includes(e.toLowerCase())).map((e,t)=>(0,a.jsx)("option",{value:e,children:e},t))})]}),(0,a.jsxs)("label",{className:n().label,children:["Image URL:",(0,a.jsx)("input",{type:"url",value:s,onChange:e=>i(e.target.value),required:!0,placeholder:"Enter image URL",className:n().input})]}),(0,a.jsxs)("label",{className:n().label,children:["Artist Bio:",(0,a.jsx)("textarea",{value:l,onChange:e=>c(e.target.value),placeholder:"Write artist bio here...",rows:"5",required:!0,className:n().textarea})]}),(0,a.jsxs)("label",{className:n().label,children:["Music URL:",(0,a.jsx)("input",{type:"url",value:o,onChange:e=>u(e.target.value),required:!0,placeholder:"Autofilled with random song music URL or edit manually",className:n().input})]}),(0,a.jsx)("button",{type:"submit",className:n().button,children:"Add/Update Artist"})]})]})}},2747:function(e){e.exports={addArtistContainer:"AddArtist_addArtistContainer__dGmY_",heading:"AddArtist_heading__z2FDa",form:"AddArtist_form__OZlb_",label:"AddArtist_label__yxxTy",input:"AddArtist_input__iTSP0",textarea:"AddArtist_textarea__FXUaC",button:"AddArtist_button__UPTR4",successMessage:"AddArtist_successMessage__BgNIy",errorMessage:"AddArtist_errorMessage__L7F1X"}}},function(e){e.O(0,[372,888,774,179],function(){return e(e.s=2546)}),_N_E=e.O()}]);