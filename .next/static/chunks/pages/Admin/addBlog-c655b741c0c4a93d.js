(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[68],{4493:function(e,l,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/Admin/addBlog",function(){return a(9509)}])},9509:function(e,l,a){"use strict";a.r(l);var t=a(5893),s=a(7294),n=a(2778),r=a(7277),i=a.n(r);l.default=()=>{let[e,l]=(0,s.useState)(""),[a,r]=(0,s.useState)(""),[o,d]=(0,s.useState)(""),[u,g]=(0,s.useState)(""),[c,p]=(0,s.useState)(""),[h,m]=(0,s.useState)(null),[b,_]=(0,s.useState)(""),[f,x]=(0,s.useState)("draft"),[j,v]=(0,s.useState)(""),[B,C]=(0,s.useState)(null),[w,y]=(0,s.useState)(null),[A,S]=(0,s.useState)(!1),I=async()=>{if(!h)return null;let e=`${o}-${Date.now()}`,l=`thumbnails/${e}`,{data:a,error:t}=await n.O.storage.from("images").upload(l,h);if(t)throw Error("Image upload failed: "+t.message);let{data:s,error:r}=n.O.storage.from("images").getPublicUrl(l);if(r)throw Error("Error getting public URL: "+r.message);return s.publicUrl},N=async t=>{t.preventDefault(),C(null),y(null),S(!0);try{let t="";h&&(t=await I());let{data:s,error:i}=await n.O.from("blogs").insert([{title:e,author:a,slug:o,excerpt:u,published_date:c,thumbnail_url:t,content:j,status:f,tags:b.split(",")}]);i?(C("Error uploading blog: "+i.message),y(null)):(y("Blog added successfully!"),C(null),l(""),r(""),d(""),g(""),p(""),_(""),v(""),x("draft"),m(null))}catch(e){C(e.message||"An error occurred while adding the blog."),y(null)}finally{S(!1)}};return(0,t.jsxs)("div",{className:i().addBlogContainer,children:[" ",(0,t.jsx)("h2",{className:i().addBlogTitle,children:"Add New Blog"}),(0,t.jsxs)("form",{className:i().addBlogForm,onSubmit:N,children:[" ",(0,t.jsx)("label",{children:"Title:"}),(0,t.jsx)("input",{type:"text",value:e,onChange:e=>l(e.target.value),required:!0}),(0,t.jsx)("label",{children:"Author:"}),(0,t.jsx)("input",{type:"text",value:a,onChange:e=>r(e.target.value),required:!0}),(0,t.jsx)("label",{children:"Slug (URL-friendly):"}),(0,t.jsx)("input",{type:"text",value:o,onChange:e=>d(e.target.value),required:!0}),(0,t.jsx)("label",{children:"Excerpt (Optional):"}),(0,t.jsx)("input",{type:"text",value:u,onChange:e=>g(e.target.value)}),(0,t.jsx)("label",{children:"Published Date (Optional):"}),(0,t.jsx)("input",{type:"date",value:c,onChange:e=>p(e.target.value)}),(0,t.jsx)("label",{children:"Thumbnail Image (Optional):"}),(0,t.jsx)("input",{type:"file",accept:".png,.jpg,.jpeg,.gif,.webp",onChange:e=>{m(e.target.files[0])}}),h&&(0,t.jsxs)("p",{children:["Selected file: ",h.name]}),(0,t.jsx)("label",{children:"Tags (comma-separated):"}),(0,t.jsx)("input",{type:"text",value:b,onChange:e=>_(e.target.value)}),(0,t.jsx)("label",{children:"HTML Content:"}),(0,t.jsx)("textarea",{value:j,onChange:e=>v(e.target.value),placeholder:"Type your blog content in HTML format here...",rows:"10",required:!0}),(0,t.jsx)("label",{children:"Status:"}),(0,t.jsxs)("select",{value:f,onChange:e=>x(e.target.value),children:[(0,t.jsx)("option",{value:"draft",children:"Draft"}),(0,t.jsx)("option",{value:"published",children:"Published"})]}),(0,t.jsx)("button",{type:"submit",disabled:A,children:A?"Uploading Blog...":"Add Blog"}),A&&(0,t.jsxs)("div",{className:i().loadingAnimation,children:[" ",(0,t.jsx)("div",{className:i().spinner}),(0,t.jsx)("p",{children:"Uploading blog..."})]}),B&&(0,t.jsx)("p",{className:i().errorMessage,children:B})," ",w&&(0,t.jsx)("p",{className:i().successMessage,children:w})," "]})]})}},2778:function(e,l,a){"use strict";a.d(l,{O:function(){return r}});var t=a(1372);let s="https://tffwhfvevgjscrhkdmpl.supabase.co",n="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InRmZndoZnZldmdqc2NyaGtkbXBsIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MjUzMzg4NjcsImV4cCI6MjA0MDkxNDg2N30.VqEkYRZU-s-9QiLp35pHR04wSw3sLVfoswggMCabkeI";if(console.log("Supabase URL: ",s),console.log("Supabase Anon Key: ",n),!s||!n)throw Error("supabaseUrl and supabaseAnonKey are required.");let r=(0,t.eI)(s,n)},7277:function(e){e.exports={addBlogContainer:"AddBlog_addBlogContainer__1lCof",addBlogTitle:"AddBlog_addBlogTitle__FFpA6",addBlogForm:"AddBlog_addBlogForm__ntBC_",errorMessage:"AddBlog_errorMessage__dv_1V",successMessage:"AddBlog_successMessage__0ZALh",loadingAnimation:"AddBlog_loadingAnimation__Lcv7f",spinner:"AddBlog_spinner__LrGL8",spin:"AddBlog_spin__hzCLh"}}},function(e){e.O(0,[372,888,774,179],function(){return e(e.s=4493)}),_N_E=e.O()}]);