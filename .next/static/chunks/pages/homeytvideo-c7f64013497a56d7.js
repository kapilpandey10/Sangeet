(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[561,609,42],{1575:function(e,t,o){(window.__NEXT_P=window.__NEXT_P||[]).push(["/homeytvideo",function(){return o(3609)}])},3609:function(e,t,o){"use strict";o.r(t);var r=o(5893),n=o(7294),i=o(2778),s=o(1163),u=o(1433),l=o.n(u);t.default=()=>{let[e,t]=(0,n.useState)(""),[o,u]=(0,n.useState)(!0),[a,c]=(0,n.useState)(0),[d,h]=(0,n.useState)(null),w=(0,s.useRouter)(),m=async()=>{u(!0);try{let{data:e,error:o}=await i.O.from("lyrics").select("title, artist, music_url, slug").not("music_url","is",null).eq("status","approved");if(o)throw Error("Error fetching videos");if(e&&e.length>0){let o=new Date().getUTCMinutes(),r=Math.floor(o/5)%e.length,n=e[r];t(n.music_url),h(n)}else throw Error("No videos found");u(!1)}catch(e){console.error(e),t("https://www.youtube.com/watch?v=dQw4w9WgXcQ"),u(!1)}};(0,n.useEffect)(()=>{m();let e=setInterval(()=>{m()},3e5);return()=>clearInterval(e)},[]);let f=()=>300-(new Date().getUTCMinutes()%5*60+new Date().getUTCSeconds());(0,n.useEffect)(()=>{let e=setInterval(()=>{c(f())},1e3);return()=>clearInterval(e)},[]);let p=e=>{let t=e.match(/(?:https?:\/\/)?(?:www\.)?(?:youtube\.com\/(?:[^\/\n\s]+\/\S+\/|(?:v|e(?:mbed)?)\/|\S*?[?&]v=)|youtu\.be\/)([a-zA-Z0-9_-]{11})/);return t?t[1]:null};return(0,r.jsxs)("div",{className:l().homeYTVideoContainer,children:[(0,r.jsxs)("h2",{children:["New Song in ",Math.floor(a/60),":",(a%60).toString().padStart(2,"0")," Minutes. Stay Tuned!"]})," ",o?(0,r.jsx)("p",{children:"Loading YouTube video..."}):(0,r.jsxs)(r.Fragment,{children:[(()=>{if(!e)return null;let t=p(e);if(!t)return null;let o=`https://www.youtube.com/embed/${t}?modestbranding=1&rel=0&controls=1&showinfo=0&autoplay=1&mute=0`;return(0,r.jsx)("div",{className:l().youtubeVideoSection,children:(0,r.jsx)("iframe",{width:"100%",height:"600",src:o,title:"YouTube video player",frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})})})(),(0,r.jsx)("button",{className:l().viewLyricsButton,onClick:()=>{if(d){let{slug:e}=d;w.push(`/lyrics/${e}`)}},children:"View Lyrics"})]})]})}},2778:function(e,t,o){"use strict";o.d(t,{O:function(){return s}});var r=o(1372);let n="https://tffwhfvevgjscrhkdmpl.supabase.co",i="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InRmZndoZnZldmdqc2NyaGtkbXBsIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MjUzMzg4NjcsImV4cCI6MjA0MDkxNDg2N30.VqEkYRZU-s-9QiLp35pHR04wSw3sLVfoswggMCabkeI";if(console.log("Supabase URL: ",n),console.log("Supabase Anon Key: ",i),!n||!i)throw Error("supabaseUrl and supabaseAnonKey are required.");let s=(0,r.eI)(n,i)},1433:function(e){e.exports={homeYTVideoContainer:"HomeYTVideo_homeYTVideoContainer__3ZaX1",youtubeVideoSection:"HomeYTVideo_youtubeVideoSection__hMo6_",viewLyricsButton:"HomeYTVideo_viewLyricsButton__7z95j"}}},function(e){e.O(0,[372,888,774,179],function(){return e(e.s=1575)}),_N_E=e.O()}]);