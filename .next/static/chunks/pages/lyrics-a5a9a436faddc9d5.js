(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[216],{4287:function(e,s,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/lyrics",function(){return a(5914)}])},5914:function(e,s,a){"use strict";a.r(s);var t=a(5893),l=a(7294),i=a(2778),r=a(1664),n=a.n(r),c=a(6596),o=a.n(c);s.default=()=>{let[e,s]=(0,l.useState)({}),[a,r]=(0,l.useState)(""),[c,d]=(0,l.useState)("all"),[u,h]=(0,l.useState)("all"),[_,y]=(0,l.useState)([]),[p,m]=(0,l.useState)([]),[L,x]=(0,l.useState)(!0),[b,g]=(0,l.useState)(null),[w,v]=(0,l.useState)(10),j=(0,l.useRef)(null);(0,l.useEffect)(()=>{document.title="Dynabeat | Nepali Music Digital Library for Song Lyrics",(async()=>{try{let{data:e,error:a}=await i.O.from("lyrics").select("title, artist, published_date, slug, language, added_by, status").eq("status","approved").order("published_date",{ascending:!1});if(a)throw a;let t=e.reduce((e,s)=>(s.artist.split(",").map(e=>e.trim()).forEach(a=>{e[a]||(e[a]=[]),e[a].push(s)}),e),{});s(t);let l=[...new Set(e.map(e=>e.language.trim().toLowerCase()))];y(l);let r=e.map(e=>new Date(e.published_date).getFullYear()),n=C(r);m(n)}catch(e){console.error("Error fetching lyrics:",e.message),g("Failed to load lyrics.")}finally{x(!1)}})()},[]);let C=e=>[{label:"1970-1980",min:1970,max:1980},{label:"1980-1990",min:1980,max:1990},{label:"1990-2000",min:1990,max:2e3},{label:"2000-2010",min:2e3,max:2010},{label:"2010-2020",min:2010,max:2020},{label:"2020-present",min:2020,max:new Date().getFullYear()}].filter(s=>e.some(e=>e>=s.min&&e<s.max)),f=Object.keys(e).reduce((s,t)=>{let l=e[t].filter(e=>{let s=e.title.toLowerCase().includes(a)||e.artist.toLowerCase().includes(a),t="all"===c||e.language.trim().toLowerCase()===c.toLowerCase(),l="all"===u||new Date(e.published_date).getFullYear()>=u.min&&new Date(e.published_date).getFullYear()<u.max;return s&&t&&l});return l.length>0&&(s[t]=l),s},{});return L?(0,t.jsxs)("div",{className:o().skeletonLoader,children:[(0,t.jsx)("div",{className:o().skeletonTitle}),(0,t.jsx)("div",{className:o().skeletonCard}),(0,t.jsx)("div",{className:o().skeletonCard}),(0,t.jsx)("div",{className:o().skeletonCard}),(0,t.jsx)("div",{className:o().skeletonCard})]}):b?(0,t.jsx)("p",{className:o().errorMessage,children:b}):(0,t.jsxs)("div",{className:o().lyricsListContainer,children:[(0,t.jsx)("h1",{children:"Music Library"}),(0,t.jsxs)("div",{className:o().squareAd,children:[(0,t.jsx)("ins",{className:"adsbygoogle",style:{display:"block"},"data-ad-client":"ca-pub-9887409333966239","data-ad-slot":"1039665871","data-ad-format":"auto","data-full-width-responsive":"true"}),(0,t.jsxs)("script",{children:["(adsbygoogle = window.adsbygoogle || []).push(",");"]})]}),(0,t.jsxs)("div",{className:o().searchFilterContainer,children:[(0,t.jsx)("input",{type:"text",placeholder:"Search by artist, lyrics, or writer...",value:a,onChange:e=>{r(e.target.value.toLowerCase())},className:o().searchInput}),(0,t.jsxs)("select",{value:c,onChange:e=>d(e.target.value),className:o().selectDropdown,children:[(0,t.jsx)("option",{value:"all",children:"All Languages"}),_.map((e,s)=>(0,t.jsx)("option",{value:e,children:e.charAt(0).toUpperCase()+e.slice(1)},s))]}),(0,t.jsxs)("select",{value:"all"===u?"all":u.label,onChange:e=>{h(p.find(s=>s.label===e.target.value)||"all")},className:o().selectDropdown,children:[(0,t.jsx)("option",{value:"all",children:"All Years"}),p.map((e,s)=>(0,t.jsx)("option",{value:e.label,children:e.label},s))]})]}),Object.keys(f).slice(0,w).map(e=>(0,t.jsxs)("div",{className:o().artistSection,children:[(0,t.jsx)("h2",{children:e}),(0,t.jsx)("div",{className:o().lyricsGrid,children:f[e].map(e=>(0,t.jsx)("div",{className:o().lyricCard,children:(0,t.jsxs)("div",{className:o().lyricCardContent,children:[(0,t.jsx)("h3",{children:e.title}),(0,t.jsxs)("p",{className:o().smallText,children:["Published: ",new Date(e.published_date).getFullYear()]}),(0,t.jsx)(n(),{href:`/lyrics/${e.slug}`,className:o().viewLyricsButton,children:"View Lyrics"})]})},e.slug))})]},e)),(0,t.jsx)("div",{ref:j,className:o().viewMoreContainer,children:(0,t.jsx)("button",{onClick:()=>v(e=>e+10),className:o().viewMoreButton,children:"Load More"})}),(0,t.jsxs)("div",{className:o().squareAd,children:[(0,t.jsx)("ins",{className:"adsbygoogle",style:{display:"block"},"data-ad-client":"ca-pub-9887409333966239","data-ad-slot":"1039665871","data-ad-format":"auto","data-full-width-responsive":"true"}),(0,t.jsxs)("script",{children:["(adsbygoogle = window.adsbygoogle || []).push(",");"]})]})]})}},2778:function(e,s,a){"use strict";a.d(s,{O:function(){return r}});var t=a(1372);let l="https://tffwhfvevgjscrhkdmpl.supabase.co",i="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InRmZndoZnZldmdqc2NyaGtkbXBsIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MjUzMzg4NjcsImV4cCI6MjA0MDkxNDg2N30.VqEkYRZU-s-9QiLp35pHR04wSw3sLVfoswggMCabkeI";if(console.log("Supabase URL: ",l),console.log("Supabase Anon Key: ",i),!l||!i)throw Error("supabaseUrl and supabaseAnonKey are required.");let r=(0,t.eI)(l,i)},6596:function(e){e.exports={"skeleton-loader":"LyricsList_skeleton-loader__tNfxZ","skeleton-title":"LyricsList_skeleton-title__k7OhT","skeleton-text":"LyricsList_skeleton-text__1dSAu","skeleton-box":"LyricsList_skeleton-box__QRk90","skeleton-card":"LyricsList_skeleton-card__WqVvj","skeleton-loading":"LyricsList_skeleton-loading__qOIiV",lyricsListContainer:"LyricsList_lyricsListContainer__M2Y2L",searchFilterContainer:"LyricsList_searchFilterContainer___3FwO",searchInput:"LyricsList_searchInput__VwBlb",selectDropdown:"LyricsList_selectDropdown__8629a",artistSection:"LyricsList_artistSection__JShqr",lyricsGrid:"LyricsList_lyricsGrid__hZK8B",lyricCard:"LyricsList_lyricCard__8FUpR",lyricCardContent:"LyricsList_lyricCardContent__xZIuf",viewLyricsButton:"LyricsList_viewLyricsButton__2OYXb",viewMoreContainer:"LyricsList_viewMoreContainer__PUUrv",viewMoreButton:"LyricsList_viewMoreButton__zqlwS"}}},function(e){e.O(0,[372,888,774,179],function(){return e(e.s=4287)}),_N_E=e.O()}]);